---
title: "Proxmox VE (PVE)æ­å»º"
published: 2026-01-15
pinned: false
description: è®°å½•å¦‚ä½•åœ¨ä¸€å°å°ä¸»æœºä¸Šå®‰è£… PVE è™šæ‹ŸåŒ–ç¯å¢ƒï¼Œå¹¶éƒ¨ç½²ç¬¬ä¸€å° Ubuntu Serverã€‚
tags: [PVE, Linux]
category: æ•™ç¨‹
draft: false
image: https://images.weserv.nl/?url=loremflickr.com/800/450/nature?lock=20260115_1&output=webp
---

æœ€è¿‘å…¥æ‰‹äº†ä¸€å°å°ä¸»æœºï¼Œæ‰“ç®—æŠ˜è…¾ä¸€ä¸ª HomeLabã€‚é¦–é€‰çš„åº•å±‚ç³»ç»Ÿå½“ç„¶æ˜¯ **Proxmox VE (PVE)**ã€‚ç›¸æ¯”äº ESXiï¼ŒPVE å¼€æºå…è´¹ï¼ŒåŸºäº Debianï¼Œå¯¹æ–°ç¡¬ä»¶çš„æ”¯æŒä¹Ÿæ›´å¥½ã€‚

è¿™ç¯‡æ–‡ç« è®°å½•äº†æˆ‘ä»é›¶å¼€å§‹å®‰è£… PVE 8.x ä»¥åŠéƒ¨ç½²ç¬¬ä¸€å° Ubuntu Server çš„å…¨è¿‡ç¨‹ã€‚

## ğŸ› ï¸ å‡†å¤‡å·¥ä½œ

åœ¨å¼€å§‹ä¹‹å‰ï¼Œéœ€è¦å‡†å¤‡ä»¥ä¸‹å·¥å…·ï¼š

1.  **ç¡¬ä»¶**ï¼šä¸€å° x86 æ¶æ„çš„å°ä¸»æœºï¼ˆå»ºè®®è‡³å°‘ 8GB å†…å­˜ï¼ŒåŒç½‘å£æ›´ä½³ï¼‰ã€‚
2.  **U ç›˜**ï¼š8GB ä»¥ä¸Šï¼Œç”¨äºåˆ¶ä½œå¯åŠ¨ç›˜ã€‚
3.  **è½¯ä»¶**ï¼š
    * [Proxmox VE ISO é•œåƒ](https://www.proxmox.com/en/downloads) (ä¸‹è½½æœ€æ–°ç‰ˆ VE 8.x ISO Installer)ã€‚
    * [Ventoy](https://www.ventoy.net/) (æ¨è) æˆ– Rufusã€‚
    * [Ubuntu Server ISO é•œåƒ](https://ubuntu.com/download/server)ã€‚

## 1. åˆ¶ä½œå¯åŠ¨ç›˜

å¼ºçƒˆæ¨èä½¿ç”¨ **Ventoy**ã€‚

1.  ä¸‹è½½å¹¶è¿è¡Œ Ventoy å®‰è£…ç¨‹åºï¼Œå°† Ventoy å®‰è£…è¿› U ç›˜ã€‚
2.  ç›´æ¥å°†ä¸‹è½½å¥½çš„ `proxmox-ve_8.x-x.iso` æ–‡ä»¶å¤åˆ¶åˆ° U ç›˜é‡Œå³å¯ã€‚

> **Tips**: ä»¥åå¦‚æœæƒ³è£… Windows æˆ– Ubuntuï¼Œåªéœ€è¦æŠŠ ISO ä¸¢è¿›å»å°±è¡Œï¼Œä¸ç”¨åå¤æ ¼å¼åŒ– U ç›˜ã€‚

## 2. BIOS è®¾ç½® (å…³é”®æ­¥éª¤)

æ’å…¥ U ç›˜ï¼Œå¼€æœºç‹‚æŒ‰ `Del` æˆ– `F2` è¿›å…¥ BIOSã€‚ä»¥ä¸‹è®¾ç½®è‡³å…³é‡è¦ï¼Œå¦åˆ™å¯èƒ½å¯¼è‡´å®‰è£…å¤±è´¥æˆ–æ€§èƒ½ä½ä¸‹ï¼š

* **Virtualization (è™šæ‹ŸåŒ–)**: å¿…é¡»å¼€å¯ `Intel VT-x` / `AMD-V`ã€‚
* **VT-d / IOMMU**: å»ºè®®å¼€å¯ï¼ˆä¸ºä»¥åç›´é€šç½‘å¡æˆ–æ˜¾å¡åšå‡†å¤‡ï¼‰ã€‚
* **Secure Boot (å®‰å…¨å¯åŠ¨)**: **å¿…é¡»å…³é—­ (Disable)**ã€‚PVE çš„å¼•å¯¼ç¨‹åºé€šå¸¸ä¸æ”¯æŒå®‰å…¨å¯åŠ¨ã€‚
* **Power Policy**: å»ºè®®è®¾ç½®ä¸º `Always On`ï¼ˆé€šç”µè‡ªå¯ï¼‰ï¼Œä½œä¸ºæœåŠ¡å™¨è¿™æ˜¯åˆšéœ€ã€‚

è®¾ç½®å®Œæˆåï¼Œä¿å­˜é‡å¯ï¼Œé€‰æ‹©ä» U ç›˜å¯åŠ¨ã€‚

## 3. PVE å®‰è£…æµç¨‹

è¿›å…¥ Ventoy ç•Œé¢åï¼Œé€‰æ‹© Proxmox VE ISOï¼Œç„¶åé€‰æ‹© `Install Proxmox VE (Graphical)`ã€‚

### 3.1 æ ¸å¿ƒé…ç½®æ­¥éª¤
1.  **ç£ç›˜é€‰æ‹©**: `Target Harddisk` é€‰æ‹©ä½ è¦å®‰è£…ç³»ç»Ÿçš„é‚£å—ç¡¬ç›˜ã€‚
2.  **åœ°åŒº**: `Country` è¾“å…¥ `China`ï¼Œ`Timezone` è‡ªåŠ¨åŒ¹é…ã€‚
3.  **å¯†ç **: è®¾ç½® `root` ç”¨æˆ·çš„å¯†ç ï¼ŒåŠ¡å¿…è®°ä½ï¼Œè¿™æ˜¯ç™»å½• Web ç®¡ç†åå°çš„å¯†ç ã€‚

### 3.2 ç½‘ç»œé…ç½® (é‡ä¸­ä¹‹é‡)
è¿™é‡Œå¿…é¡»è®¾ç½®ä¸€ä¸ª **é™æ€ IP (Static IP)**ï¼Œä¸èƒ½ç”¨ DHCPã€‚

* **Management Interface**: é€‰æ‹©ä¸»ç½‘å£ã€‚
* **Hostname**: è­¬å¦‚ `pve.local`ã€‚
* **IP Address**: `192.168.xx.xx` (é€‰ä¸€ä¸ªå›ºå®šçš„ IPï¼Œä¸è¦å’Œå®¶é‡Œå…¶ä»–è®¾å¤‡å†²çª)ã€‚
* **Gateway**: è·¯ç”±å™¨ IPã€‚
* **DNS Server**: å¯ä»¥å¡«è·¯ç”±å™¨ IPï¼Œæˆ–è€… `114.114.114.114`ã€‚

å®‰è£…å®Œæˆåæ‹”æ‰ U ç›˜ï¼Œæœºå™¨ä¼šè‡ªåŠ¨é‡å¯ã€‚

## 4. PVE åˆå§‹åŒ–ä¸ä¼˜åŒ–

åœ¨åŒä¸€å±€åŸŸç½‘çš„ç”µè„‘æµè§ˆå™¨è¾“å…¥ `https://ä½ çš„PVE_IP:8006` ç™»å½•ã€‚

### 4.1 æ¢æº (å»é™¤ä¼ä¸šè®¢é˜…æº)
PVE é»˜è®¤ä½¿ç”¨ä¼ä¸šæºï¼Œå…è´¹ç”¨æˆ·æ— æ³•æ›´æ–°ã€‚åœ¨ PVE çš„ Shell ä¸­æ‰§è¡Œï¼š

```bash
# æ›¿æ¢ä¸ºæ¸…åæºï¼ˆä»¥ PVE 8.x bookworm ä¸ºä¾‹ï¼‰
sed -i 's|^deb [http://ftp.debian.org](http://ftp.debian.org)|deb [https://mirrors.tuna.tsinghua.edu.cn](https://mirrors.tuna.tsinghua.edu.cn)|g' /etc/apt/sources.list
sed -i 's|^deb [http://security.debian.org](http://security.debian.org)|deb [https://mirrors.tuna.tsinghua.edu.cn/debian-security](https://mirrors.tuna.tsinghua.edu.cn/debian-security)|g' /etc/apt/sources.list
```

## 5. åˆ›å»ºé«˜æ€§èƒ½è™šæ‹Ÿæœº (Ubuntu Server)

è¿™æ˜¯æœ€æ ¸å¿ƒçš„éƒ¨åˆ†ï¼Œä¸ºäº†è·å¾—æœ€ä½³æ€§èƒ½ï¼Œé…ç½®å¤§æœ‰è®²ç©¶ã€‚

1.  **ä¸Šä¼  ISO**: åœ¨ `local (pve)` -> `ISO Images` ä¸Šä¼  Ubuntu Server é•œåƒã€‚
2.  **åˆ›å»º VM (Create VM)**ï¼Œæ³¨æ„ä»¥ä¸‹å…³é”®å‚æ•°ï¼š

| é€‰é¡¹å¡ | å…³é”®è®¾ç½®é¡¹ | æ¨èå€¼ | åŸå›  |
| :--- | :--- | :--- | :--- |
| **System** | Machine | `q35` | è¾ƒæ–°çš„æ¶æ„ï¼ŒPCIe ç›´é€šæ”¯æŒæ›´å¥½ |
| **System** | BIOS | `OVMF (UEFI)` | ç°ä»£ OS æ¨è |
| **System** | Qemu Agent | **å¼€å¯ (Enable)** | **æé‡è¦**ï¼è®© PVE èƒ½è·å– IP å’Œæ­£ç¡®å…³æœº |
| **Disks** | Bus/Device | **VirtIO Block** | æ€§èƒ½æœ€å¥½çš„åŠè™šæ‹ŸåŒ–é©±åŠ¨ |
| **CPU** | Type | **Host** | ç›´æ¥é€ä¼ ç‰©ç† CPU æŒ‡ä»¤é›†ï¼Œæ€§èƒ½æœ€å¼º |
| **Network**| Model | **VirtIO (paravirtualized)** | ç½‘ç»œæ€§èƒ½æœ€ä½³ |

## 6. Ubuntu Server å®‰è£…é¿å‘

å¯åŠ¨è™šæ‹Ÿæœºå®‰è£…æ—¶ï¼š
* **ç”¨æˆ·è®¾ç½®**: ä¸è¦ç›´æ¥ç”¨ `root`ï¼Œåˆ›å»ºä¸€ä¸ªæ™®é€šç”¨æˆ·ï¼ˆå¦‚ `jcao`ï¼‰ã€‚
* **SSH**: åŠ¡å¿…å‹¾é€‰ `[X] Install OpenSSH server`ã€‚

### âš ï¸ å¸¸è§æŠ¥é”™ï¼šFailed unmounting cdrom
å®‰è£…å®Œé‡å¯æ—¶ï¼Œå¦‚æœå¡åœ¨ `Failed unmounting cdrom`ï¼š
1.  å›åˆ° PVE ç½‘é¡µç•Œé¢ -> é€‰ä¸­è™šæ‹Ÿæœº -> **ç¡¬ä»¶**ã€‚
2.  æ‰¾åˆ° **CD/DVD Drive** -> ç¼–è¾‘ -> é€‰æ‹© **â€œä¸ä½¿ç”¨ä»»ä½•ä»‹è´¨â€**ã€‚
3.  å›åˆ°æ§åˆ¶å°æŒ‰ Enter å³å¯ã€‚

## 7. å®‰å…¨åŠ å›º (å¿…åš)

æœåŠ¡å™¨æš´éœ²åœ¨ç½‘ç»œä¸­ï¼Œå®‰å…¨ç¬¬ä¸€ã€‚

### 7.1 é…ç½® SSH å¯†é’¥ç™»å½•
åœ¨æœ¬åœ°ç”µè„‘ç”Ÿæˆå¯†é’¥å¹¶ä¸Šä¼ ï¼š
```bash
ssh-copy-id jcao@192.168.xx.xx
```
ç„¶åä¿®æ”¹ `/etc/ssh/sshd_config`ï¼š
```bash
PasswordAuthentication no  # ç¦æ­¢å¯†ç ç™»å½•
PubkeyAuthentication yes   # å…è®¸å…¬é’¥ç™»å½•
```

### 7.2 ä¿®æ”¹ SSH ç«¯å£ä¸é˜²ç«å¢™
ä¸ºäº†é˜²æ‰«æï¼Œå»ºè®®ä¿®æ”¹ SSH é»˜è®¤ç«¯å£ï¼ˆä¾‹å¦‚æ”¹ä¸º 2333ï¼‰ã€‚

1.  **ä¿®æ”¹é…ç½®**: ç¼–è¾‘ `/etc/ssh/sshd_config`ï¼Œè®¾ç½® `Port 2333`ã€‚
2.  **é‡å¯æœåŠ¡ (Ubuntu 24.04 ç‰¹æœ‰)**:
    ç”±äºä½¿ç”¨äº† Socket æ¿€æ´»ï¼Œå¿…é¡»é‡å¯ Socket æœåŠ¡æ‰èƒ½ç”Ÿæ•ˆï¼š
    ```bash
    sudo systemctl daemon-reload
    sudo systemctl restart ssh.socket
    ```
3.  **æ”¾è¡Œé˜²ç«å¢™**:
    ```bash
    sudo ufw allow 2333/tcp
    sudo ufw enable
    ```

### 7.3 å®‰è£… Fail2ban
é˜²çˆ†ç ´ç¥å™¨ï¼š
```bash
sudo apt install fail2ban
# å¤åˆ¶é…ç½®æ–‡ä»¶
sudo cp /etc/fail2ban/jail.conf /etc/fail2ban/jail.local
# é‡å¯æœåŠ¡
sudo systemctl restart fail2ban
```

---

è‡³æ­¤ï¼Œä¸€å°é«˜æ€§èƒ½ã€å®‰å…¨çš„ Linux æœåŠ¡å™¨å°±æ­å»ºå®Œæˆäº†ï¼